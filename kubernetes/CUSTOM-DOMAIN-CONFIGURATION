1. WE NEED A DOMAIN (SIVASURIBABU.COM)

2.> GO TO THE ROUTE53
  > CREATE HOSTED ZONES
  > DOMAIN NAME : SIVASURIBABU.COM --> PUBLIC HOSTED ZONE
  > CREATE RECORD
  > RECORD NAME (WWW)
  > ROUTE TYPE ALIAS (SELECT LOAD BALANCER)
  > ROUTING TYPE ( SIMLE ROUTING)
  > UPDATE THE DNS RECORDS(NAME SERVERS)  IN GODADDY DOMAIN

3. GOTO WATCH MYDNS --> SIVASURIBABU.COM 

4. GOT THE AWS CONSOLE --> EC2 --> LOAD BALANCER --> K8S-DEFUALT-ADDRESS --> RULES --> LOOK FOR HTTP-HEADER

5. NSLOOKUP WWW.SIVASURIBABU.COM (HOST NAME IN THE INGRESS.YAML IS SHOULD BE WWW.SIVASURIBABU.COM)

5 OPEN YOUR TERMINAL --> CURL --RESOLVE SIVASURIBABU.COM:PASTE THE IP FROM WATCHMYDNS" SIVASURIBABU.COM


*******************************TROUBLE SHOOTING*************************************************

6. kubectl describe ingress frontend-proxy (if load balancer listeners are not updated ,need to use the command and check logs)
    --> if ther there is an error like (api error AccessDenied: User: arn:aws:sts::644209053375:assumed-role/AmazonEKSLoadBalancerControllerRole/1765645658159160909 is not authorized to perform: ec2:GetSecurityGroupsForVpc)
    --> apply the below rules in this role (AmazonEKSLoadBalancerControllerRole)
          "Effect": "Allow",
          "Action": [
            "ec2:GetSecurityGroupsForVpc",
            "ec2:DescribeSecurityGroups",
            "ec2:DescribeVpcs",
            "ec2:DescribeSubnets",
            "ec2:DescribeInstances",
            "ec2:DescribeNetworkInterfaces"
          ],

  --> kubectl -n kube-system describe deployment aws-load-balancer-controller
  --> kubectl -n kube-system get sa aws-load-balancer-controller -o yaml (output : annotations:
                                                                                    eks.amazonaws.com/role-arn: arn:aws:iam::<ACCOUNT_ID>:role/AmazonEKSLoadBalancerControllerRole)

  --> Restart Controller After Fix (Required)
        kubectl rollout restart deployment aws-load-balancer-controller -n kube-system


7. Error type-2     AmazonEKSLoadBalancerControllerRole does not have permission to read ALB listener attributes. Because of this, the controller cannot reconcile listener rules, and reconciliation fails.
      {
  "Effect": "Allow",
  "Action": [
      "elasticloadbalancing:DescribeListenerAttributes",
      "elasticloadbalancing:DescribeLoadBalancers",
      "elasticloadbalancing:DescribeListeners",
      "elasticloadbalancing:DescribeListenerAttributes",
      "elasticloadbalancing:DescribeRules",
      "elasticloadbalancing:CreateRule",
      "elasticloadbalancing:DeleteRule",
      "elasticloadbalancing:ModifyListener",
      "elasticloadbalancing:ModifyRule"
  ],
  "Resource": "*"
}


--> kubectl rollout restart deployment aws-load-balancer-controller -n kube-system

